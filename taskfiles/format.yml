version: '3'

tasks:
  default:
    label: format
    desc: Run formatters
    deps:
      - json
      - sh
      - yaml

  json:
    desc: Format JSON files
    sources:
      - ./**/*.json
    cmds:
      - for: sources
        cmd: prettier --write --parser json {{.ITEM}}

  sh:
    desc: Format sh/bash files
    sources:
      - ./**/*.sh
      - ./.githooks/commit-msg
      - ./.githooks/pre-commit
    cmds:
      - shfmt --write .

  yaml:
    desc: Format YAML files
    sources:
      - ./**/*.yml
      - ./**/*.yaml
    cmds:
      - yamlfmt .
