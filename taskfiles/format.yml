version: '3'

tasks:
  default:
    label: format
    desc: Run formatters
    cmds:
      - task: githooks
      - task: json
      - task: sh
      - task: yaml

  githooks:
    desc: Format githooks files
    sources:
      - ./.githooks/commit-msg
      - ./.githooks/pre-commit
    cmds:
      - for: sources
        cmd: shfmt {{.ITEM}}

  json:
    desc: Format JSON files
    sources:
      - ./**/*.json
    cmds:
      - fd --hidden --type file --extension json | xargs prettier --write --parser json

  sh:
    desc: Format sh/bash files
    sources:
      - ./**/*.sh
    cmds:
      - fd --hidden --type file --extension sh | xargs shfmt --write

  yaml:
    desc: Format YAML files
    sources:
      - ./**/*.yml
      - ./**/*.yaml
    cmds:
      - yamlfmt .
